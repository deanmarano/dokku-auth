#!/usr/bin/env bash
# Logging functions with fallbacks when dokku functions aren't available

# Colors
if [[ -t 1 ]]; then
  RED='\033[0;31m'
  GREEN='\033[0;32m'
  YELLOW='\033[1;33m'
  BLUE='\033[0;34m'
  CYAN='\033[0;36m'
  NC='\033[0m'
else
  RED=''
  GREEN=''
  YELLOW=''
  BLUE=''
  CYAN=''
  NC=''
fi

# Check if dokku logging functions exist
if ! declare -f dokku_log_info1 &>/dev/null; then
  dokku_log_info1() {
    echo -e "${GREEN}-----> ${NC}$*"
  }
fi

if ! declare -f dokku_log_info2 &>/dev/null; then
  dokku_log_info2() {
    echo -e "${GREEN}=====> ${NC}$*"
  }
fi

if ! declare -f dokku_log_warn &>/dev/null; then
  dokku_log_warn() {
    echo -e "${YELLOW} !     ${NC}$*" >&2
  }
fi

if ! declare -f dokku_log_fail &>/dev/null; then
  dokku_log_fail() {
    echo -e "${RED} !     ${NC}$*" >&2
    exit 1
  }
fi

if ! declare -f dokku_log_verbose &>/dev/null; then
  dokku_log_verbose() {
    echo -e "       $*"
  }
fi

if ! declare -f dokku_log_quiet &>/dev/null; then
  dokku_log_quiet() {
    echo -e "$*"
  }
fi

# Additional helper functions
log_step() {
  echo -e "${CYAN}[STEP]${NC} $*"
}

log_exec() {
  echo -e "${GREEN}[EXEC]${NC} $*"
}

log_plan() {
  echo -e "${YELLOW}[PLAN]${NC} $*"
}

log_debug() {
  if [[ -n "$DOKKU_TRACE" ]]; then
    echo -e "${BLUE}[DEBUG]${NC} $*" >&2
  fi
}
