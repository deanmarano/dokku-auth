#!/usr/bin/env bash
# shellcheck disable=SC2034
# Plugin configuration

export PLUGIN_COMMAND_PREFIX="sso"
export PLUGIN_SERVICE="sso"
export PLUGIN_DATA_ROOT="${DOKKU_LIB_ROOT:-/var/lib/dokku}/services/sso"

# Dokku binary path - use full path to avoid basher PATH issues
export DOKKU_BIN="${DOKKU_BIN:-/usr/bin/dokku}"
PLUGIN_BASE_PATH="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
export PLUGIN_BASE_PATH

# Dokku may or may not pass the command name as $1 depending on version/config
# This function strips it if present
strip_command_prefix() {
  if [[ "${1:-}" == sso:* ]]; then
    shift
  fi
  echo "$@"
}

# Default directory provider
export DEFAULT_DIRECTORY_PROVIDER="lldap"

# Default frontend provider
export DEFAULT_FRONTEND_PROVIDER="authelia"

# Network for SSO services to communicate
export SSO_NETWORK="dokku.sso.network"

# Default group for users who should be added to all app groups
export DEFAULT_USERS_GROUP="dokku-sso-default-users"
